(this["webpackJsonpbmo-accessibility"]=this["webpackJsonpbmo-accessibility"]||[]).push([[0],{204:function(e,a,t){e.exports=t(425)},423:function(e,a,t){},425:function(e,a,t){"use strict";t.r(a);t(205),t(214);var r=t(0),n=t.n(r),l=t(89),c=t.n(l),i=t(92),s=t(122),o=t.n(s),u=t(199),m=["inexpensive","average","moderately expensive","expensive"],p=t(200),d=t.n(p),v=Object(i.b)({name:"restaurantSearch",initialState:{availableRestaurants:[],filter:"",city:"",isFetching:!1,error:""},reducers:{setRestaurants:function(e,a){e.availableRestaurants=a.payload},setCity:function(e,a){e.city=a.payload},setError:function(e,a){e.error=a.payload},setFetching:function(e,a){e.isFetching=a.payload},setFilter:function(e,a){e.filter=a.payload}}}),b=v.actions,h=b.setRestaurants,f=b.setError,E=b.setFetching,g=b.setFilter,y=b.setCity,w=function(e){var a=e.restaurantSearch,t=a.availableRestaurants,r=a.filter;return r?t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())||e.address.toLowerCase().includes(r.toLowerCase())||e.area.toLowerCase().includes(r.toLowerCase())})):t},S=function(e){return e.restaurantSearch.error},N=v.reducer,x=Object(i.a)({reducer:{restaurantSearch:N}}),R=t(41),F=t(91),O=t(49);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(423);var C=t(203),j=function(e){var a=e.label,t=e.name,l=e.onSubmit,c=e.ctaText,i=e.ariaLabel,s=e.placeholder,o=Object(r.useState)(""),u=Object(C.a)(o,2),m=u[0],p=u[1];return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(m)}},n.a.createElement("label",{for:t},a),n.a.createElement("input",{id:t,name:t,onChange:function(e){return p(e.target.value)},placeholder:s,value:m,type:"text","aria-label":i}),n.a.createElement("button",null,c)))},k=function(e){var a=e.history,t=Object(R.b)(),r=Object(R.c)(S);return n.a.createElement("header",{className:"hero"},n.a.createElement("div",{className:"card"},n.a.createElement("h1",null,"RestoFinder"),n.a.createElement("p",null,"A search engine for local restaurants using the Open Table API."),n.a.createElement(j,{name:"city",label:"City",onSubmit:function(e){return t(function(e,a){return function(){var t=Object(u.a)(o.a.mark((function t(r){var n,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(g("")),r(f("")),r(E(!0)),r(y(e)),t.next=7,d.a.get("http://opentable.herokuapp.com/api/restaurants",{params:{city:e}});case 7:if(n=t.sent,l=n.data.restaurants,r(E(!1)),!(l&&l.length>0)){t.next=13;break}return r(h(l)),t.abrupt("return",a.push("/results"));case 13:return t.abrupt("return",r(f('No results found for "'.concat(e,'".'))));case 16:t.prev=16,t.t0=t.catch(0),r(f("Encountered a problem connecting with the OpenTable API."));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()}(e,a))},ctaText:"Search",ariaLabel:"Enter a city to get a list of available restaurants.",placeholder:"ie. Toronto"}),r&&n.a.createElement("p",{className:"error","aria-live":"assertive"},r)))},L=function(e){var a=e.imgSrc,t=e.name,r=e.address,l=e.price,c=void 0===l?1:l,i=e.reserveUrl;return n.a.createElement("div",{className:"card","aria-live":"polite"},n.a.createElement("img",{src:a,alt:"Preview of ".concat(t)}),n.a.createElement("div",{className:"card-content"},n.a.createElement("h3",null,t),n.a.createElement("p",null,r),n.a.createElement("p",{className:"visually-hidden"},"Pricing is ".concat(m[c-1],".")),n.a.createElement("p",{"aria-hidden":"true"},"$".repeat(c),n.a.createElement("span",{className:"disabled"},"$".repeat(4-c)))),n.a.createElement("a",{href:i,"aria-label":"Reserve a table at ".concat(t,".")},"Reserve"))},T=function(e){var a=e.restaurants,t=Object(R.b)();return n.a.createElement("div",{"aria-live":"polite"},n.a.createElement("div",{className:"filter-bar"},n.a.createElement("div",{className:"filter-content wrapper"},n.a.createElement(j,{label:"Filter",name:"refine",onSubmit:function(e){return t(g(e))},ctaText:"Filter",ariaLabel:"Refine the list of available restaurants by entering a name, address or area.",placeholder:"Refine the list of available restaurants."}),n.a.createElement("h2",{"aria-live":"polite"},"".concat(a.length," Available Restaurants")))),n.a.createElement("div",{className:"cards-container wrapper"},a.length>0&&a.map((function(e){var a=e.image_url,t=e.reserve_url,r=e.price,l=e.name,c=e.address,i=e.id;return n.a.createElement(L,{key:i,imgSrc:a,name:l,address:c,price:r,reserveUrl:t})}))))},A=function(){var e=Object(R.c)(w);return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"results-header"},n.a.createElement("div",{className:"wrapper top-bar"},n.a.createElement("h1",null,"RestoFinder"),n.a.createElement(F.b,{to:"/"},"Back to Home"))),n.a.createElement("main",null,n.a.createElement(T,{restaurants:e})))};c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R.a,{store:x},n.a.createElement(F.a,null,n.a.createElement(O.a,{exact:!0,path:"/",component:k}),n.a.createElement(O.a,{path:"/results",component:A})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[204,1,2]]]);
//# sourceMappingURL=main.2ead5ceb.chunk.js.map